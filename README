cloud-disk
==========

cloud disk - linux block device with data backend in web/cloud.

BUILD:

make

BUILD CLEAN:

make clean

INSTALL:
	on client-side:
		sudo insmod bin/cdisk_cli.ko
	on server-side:
		sudo insmod bin/cdisk_srv.ko

UNINSTALL:
	on client-side:
		sudo rmmod cdisk_cli.ko
	on server-side:
		sudo rmmod cdisk_srv.ko

USAGE (client-side):

sudo bin/cdisk_ctl --create DISK_NUM
  	"this creates /dev/cdiskDISK_NUM device"

sudo /sbin/mkfs -t ext4 /dev/cdisk1 
  	"format device space to ext4 fs"

sudo mkdir /mnt/mnt_point 
  	"create mount point"

sudo mount -t ext4 /dev/cdisk1 /mnt/mnt_point 
  	"mount file system to dir"

sudo cd /mnt/mnt_point && ... 
  	"work inside ext4 on our device"

sudo umount /mnt/mnt_point
 	"umount file system"

sudo bin/cdisk_ctl --destroy DISK_NUM
  	"delete device /dev/cdiskDISK_NUM"

LOGGING:
	dmesg 
		or 
	on client-side:
		/var/log/cdisk_cli.log (root access required)
	on server-side:
		/var/log/cdisk_srv.log (root access required)

TESTS:

sudo python  tests/test_fs_fmt.py
	"this test does the same in USAGE section"

SOURCES STRUCTURE:

bin\  	"folder for binaries"
	cdisk_cli.ko 	"client kernel module binary"
	cdisk_srv.ko	"server kernel module binary"
  	cdisk_ctl    	"ctl utility binary"

utils\  	"folder for ctl utilities"
  	cdisk_ctl.c 	"ctl utility code"
  	Makefile    	"ctl utility makefile"
  
driver\		"folder for device driver"
  	include\ 		"folder for external dev. driver headers"
   		cdisk_cmd.h	"header for dev. driver public ioctls"
	inc\			"folder for private headers"
		cdisk.h		"cdisk client general header"
		cserver.h	"server general header"
		klog.h
		socket.h
		
 	lib\
  		klog.c        	"kernel logging, wrapper over printk"
  	 	sockets.c     	"kernel sockets lib"
  	client\
		cdisk.c       	"client block(disk) device driver"
  	server\
		cserver.c	"server driver"

  	Makefile      	"kernel modules makefile"
  
tests\  "folder for tests"
	__init__.py 
  	settings.py	"general settings container"
  	cmd.py         	"lib to execute shell cmd"
  	test_fs_fmt.py  "disk formating to EXT4 like file system test"

